(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{478:function(t,e,s){"use strict";s.r(e);var a=s(42),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"flutter-app-的打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-app-的打包"}},[t._v("#")]),t._v(" Flutter APP 的打包")]),t._v(" "),s("p",[t._v("在写完 Flutter APP 之后，接下来最重要的一步就是讲 APP 打包发布，那么 Flutter 的 APP 该如何打包呢？")]),t._v(" "),s("h2",{attrs:{id:"flutter-app-的构建模式及构建方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-app-的构建模式及构建方法"}},[t._v("#")]),t._v(" Flutter APP 的构建模式及构建方法")]),t._v(" "),s("p",[t._v("首先需要了解 Flutter 编译 APP 时的三种构建模式：")]),t._v(" "),s("ol",[s("li",[t._v("Debug")]),t._v(" "),s("li",[t._v("Release")]),t._v(" "),s("li",[t._v("Profile")])]),t._v(" "),s("p",[t._v("在将每种构建模式的构建方法。")]),t._v(" "),s("h2",{attrs:{id:"_1-debug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-debug"}},[t._v("#")]),t._v(" 1. Debug")]),t._v(" "),s("p",[t._v("Debug 模式，顾名思义，就是在开发调试时使用的模式。Flutter APP 在 Debug 模式下运行，会在 App 的右上角看到一个 Debug 的标志，如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/3/2/1693eff591e728d7?w=944&h=227&f=png&s=24860",alt:""}})]),t._v(" "),s("p",[t._v("前面讲 Hot Reload 的时候说到，Hot Reload 只能在 Debug 模式下使用。")]),t._v(" "),s("p",[t._v("Release 模式下没有没有这个标志。")]),t._v(" "),s("p",[t._v("在 Debug 模式下，为了方便调试，Flutter 增加了很多方便调试的功能：")]),t._v(" "),s("ol",[s("li",[t._v("Flutter 的断言（Assertions）功能是开的")]),t._v(" "),s("li",[t._v("Flutter 的 Dart Observatory 是开的，Dart Observatory 是用于分析和调试 Dart 代码的工具，可以 debugger，也可以检测性能等，后面会详细介绍 Dart Observatory 的使用。")]),t._v(" "),s("li",[t._v("Flutter 的一些扩展功能是开启的，例如监控性能的浮层等。")]),t._v(" "),s("li",[t._v("Dart 代码采用 JIT 编译，因此可以使用 Hot Reload，方便快速开发。")])]),t._v(" "),s("p",[t._v("可以看到，在 Debug 模式下，一方面 Flutter 采用的是 JIT 编译，另一方面 开启了很多额外功能，因此性能会差一些，所以 Debug 模式只能用在开发阶段。")]),t._v(" "),s("p",[t._v("当 Flutter APP 已 Debug 模式运行时， 既可以运行在真机上，也可以运行在模拟器上。")]),t._v(" "),s("h4",{attrs:{id:"debug-构建方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debug-构建方法"}},[t._v("#")]),t._v(" Debug 构建方法")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("IDE")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Android Stuido:")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/16/168f532e178ccf19?w=994&h=162&f=jpeg&s=52378",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("VS Code:")]),t._v(" "),s("p",[t._v("点击 "),s("strong",[t._v("Debug > Start Debugging")]),t._v(" 或 "),s("strong",[t._v("Debug > Start Without Debugging")]),t._v("。")])])])]),t._v(" "),s("li",[s("p",[t._v("命令行:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$flutter run\n\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"_2-release"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-release"}},[t._v("#")]),t._v(" 2. Release")]),t._v(" "),s("p",[t._v("Release 模式，顾名思义，就是在发布 APP 时使用的模式。使用 Release 模式部署应用程序，可以达到最高的性能和最小的安装包大小。")]),t._v(" "),s("p",[t._v("在 Release 模式下，为了提高运行性能：")]),t._v(" "),s("ol",[s("li",[t._v("断言（Assertions）功能关闭")]),t._v(" "),s("li",[t._v("没有 Debugging 的信息")]),t._v(" "),s("li",[t._v("Debugging 的功能关闭")]),t._v(" "),s("li",[t._v("Dart 代码采用 AOT 编译。使用 AOT 编译成 Native Arm Code，不仅可以使 Flutter APP 因更快速的启动，更快速的执行，而且使用 AOT 编译生成的 Native Arm Code 的产物的大小也会小很多。")]),t._v(" "),s("li",[t._v("一些扩展功能被关闭")])]),t._v(" "),s("p",[t._v("所以，当你的 APP 要发布的时候，一定要使用 Release 模式。")]),t._v(" "),s("p",[t._v("Release 模式只能运行在真机上，不能运行在模拟器上。")]),t._v(" "),s("h4",{attrs:{id:"release-构建方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#release-构建方法"}},[t._v("#")]),t._v(" Release 构建方法")]),t._v(" "),s("p",[t._v("要想构建 Release 包，首先得连接真机，因为 Release 模式只能运行在真机上。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("IDE")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Android Studio")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918bff11eb5328?w=1007&h=257&f=jpeg&s=56596",alt:""}})]),t._v(" "),s("p",[t._v("打开 "),s("strong",[t._v("Edit Configurations...")]),t._v("，如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918c1a3aa8d965?w=2138&h=554&f=jpeg&s=152620",alt:""}})]),t._v(" "),s("p",[t._v("在 Additional arguments 这里加上 "),s("code",[t._v("--release")]),t._v("，构建出来的就是 Release 模式，为空的话，就是 Debug 模式。")]),t._v(" "),s("p",[t._v("或者，直接运行 "),s("strong",[t._v("Run")]),t._v(" -> "),s("strong",[t._v("Flutter Run 'main.dart' in Release Mode")]),t._v("：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918e2b0a0565e3?w=678&h=754&f=jpeg&s=126879",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("VS Code")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918c546b814f8a?w=540&h=342&f=jpeg&s=57690",alt:""}})]),t._v(" "),s("p",[t._v("选择 "),s("strong",[t._v("Debug")]),t._v(" ，点击 "),s("strong",[t._v("Open Configurations")]),t._v(" ，打开 "),s("strong",[t._v("launch.json")]),t._v(" ，如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918cbf12861837?w=1414&h=578&f=jpeg&s=112545",alt:""}})]),t._v(" "),s("p",[t._v("增加下面这一行：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"flutterMode": "release"\n\n')])])]),s("p",[t._v("完整的 "),s("strong",[t._v("launch.json")]),t._v(" 为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n// Use IntelliSense to learn about possible attributes.\n// Hover to view descriptions of existing attributes.\n// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n"version": "0.2.0",\n"configurations": [\n\n        {\n            "name": "Flutter",\n            "request": "launch",\n            "type": "dart",\n            "flutterMode": "release"\n        }\n    ]\n}\n\n')])])]),s("p",[t._v("然后在点击 "),s("strong",[t._v("Debug > Start Without Debugging")]),t._v("。")])])])]),t._v(" "),s("li",[s("p",[t._v("用命令行:")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$flutter run --release\n\n")])])]),s("p",[t._v("或者")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$flutter build apk //构建Android Release包\n$flutter build ios //构建iOS Release包\n\n")])])]),s("p",[t._v("如果你没有连真机，而是连的模拟器，则会报如下的错误：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/3/19/16996ace287f1bb4?w=914&h=182&f=jpeg&s=29989",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_3-profile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-profile"}},[t._v("#")]),t._v(" 3. Profile")]),t._v(" "),s("p",[t._v("Profile 模式是专门监控性能的模式，在 Debug 模式下，开启了很多额外的功能，因此不能实际反应应用的性能，但在 Release 模式下，也没有监控的功能，所以就有了 Profile 模式。Profile 模式是 Debug 模式和 Release 模式的结合。")]),t._v(" "),s("p",[t._v("Profile 模式和 Release 模式更接近，都采用了 AOT 编译，所以都不能用 Hot Reload，但是 Profile 相对于 Release，保留了一定的调试能力，足以分析 Flutter 的性能：")]),t._v(" "),s("ol",[s("li",[t._v("一些扩展的服务功能是打开的，例如监控性能的浮层等。")]),t._v(" "),s("li",[t._v("Tracing 是打开的，而且 Dart Observatory 也可以连接到进程。")])]),t._v(" "),s("p",[t._v("而且为了更加准确的反应 Flutter 在真机上的运行性能，Profile 模式只能跑在真机上，不能运行在模拟器上。")]),t._v(" "),s("h4",{attrs:{id:"profile-构建方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#profile-构建方法"}},[t._v("#")]),t._v(" Profile 构建方法")]),t._v(" "),s("p",[t._v("要想构建 Profile 包，首先得连接真机，因为 Profile 模式只能运行在真机上。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("IDE")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Android Studio")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918d8054dce65e?w=1814&h=426&f=jpeg&s=128303",alt:""}})]),t._v(" "),s("p",[t._v("按照 Release 的方法，这里参数改为 "),s("code",[t._v("--profile")])]),t._v(" "),s("p",[t._v("或者，直接运行 "),s("strong",[t._v("Run")]),t._v(" -> "),s("strong",[t._v("Flutter Run 'main.dart' in Profile Mode")]),t._v("：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/3/20/16996b1f02e5f4ae?w=834&h=826&f=jpeg&s=163973",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("VS Code")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918c546b814f8a?w=540&h=342&f=jpeg&s=57690",alt:""}})]),t._v(" "),s("p",[t._v("选择 "),s("strong",[t._v("Debug")]),t._v(" ，点击 "),s("strong",[t._v("Open Configurations")]),t._v("，打开 "),s("strong",[t._v("launch.json")]),t._v("，如下：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918de333d2e438?w=1318&h=596&f=jpeg&s=117636",alt:""}})]),t._v(" "),s("p",[t._v("增加下面这一行：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('"flutterMode": "profile"\n\n')])])]),s("p",[t._v("完整的 "),s("strong",[t._v("launch.json")]),t._v(" 为：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n// Use IntelliSense to learn about possible attributes.\n// Hover to view descriptions of existing attributes.\n// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n"version": "0.2.0",\n"configurations": [\n\n        {\n            "name": "Flutter",\n            "request": "launch",\n            "type": "dart",\n            "flutterMode": "profile"\n        }\n    ]\n}\n\n')])])]),s("p",[t._v("然后在点击 "),s("strong",[t._v("Debug > Start Without Debugging")]),t._v("。")])])])]),t._v(" "),s("li",[s("p",[t._v("用命令行:")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$flutter run --profile\n\n")])])]),s("h1",{attrs:{id:"flutter-android-ios-安装包分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-android-ios-安装包分析"}},[t._v("#")]),t._v(" Flutter Android/iOS 安装包分析")]),t._v(" "),s("h2",{attrs:{id:"flutter-android-debug-安装包分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-android-debug-安装包分析"}},[t._v("#")]),t._v(" Flutter Android Debug 安装包分析")]),t._v(" "),s("p",[t._v("如果前面你连接了 Android 虚拟机或真机，并且按照前面几节的操作运行了 Flutter APP，那么在 Flutter 目录下，找到 "),s("code",[t._v("build/app/outputs/apk/debug/app-debug.apk")]),t._v(" ,就是 Android 的 Debug 安装包，安装包里的内容如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918f02ccf3485c?w=2372&h=326&f=jpeg&s=86534",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"lib目录下的-flutter-engine-so"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lib目录下的-flutter-engine-so"}},[t._v("#")]),t._v(" lib目录下的 Flutter Engine so")]),t._v(" "),s("p",[t._v("lib 目录下是 Flutter Engine的so：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918f13e87cba03?w=2390&h=292&f=jpeg&s=86020",alt:""}})]),t._v(" "),s("p",[t._v("总共有三个平台的 so：")]),t._v(" "),s("ul",[s("li",[t._v("x86_64")]),t._v(" "),s("li",[t._v("x86")]),t._v(" "),s("li",[t._v("arm64-v8a")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("so 的大小问题")]),t._v(" "),s("p",[t._v("总大小是17.8M，占到整个apk安装包的71.4%，你可能会觉得好大，但是不用担心，因为Debug模式需要运行在模拟器上，所以才打入了x86_64和x86两个平台的so，所以会比较大，在Release模式下是不会打入x86_64和x86的，而且Google也在不断优化Flutter Engine的so大小。")])]),t._v(" "),s("li",[s("p",[t._v("assets 目录")]),t._v(" "),s("p",[t._v("assets 目录下的都是 Flutter 生成的产物。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/16918f96d1aa0eca?w=2358&h=454&f=jpeg&s=116813",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("flutter_assets 目录")]),t._v(" "),s("ul",[s("li",[t._v("kernel_blob.bin：由Flutter代码生成")]),t._v(" "),s("li",[t._v("vm_snapshot_data：VM虚拟机数据段")]),t._v(" "),s("li",[t._v("isolate_snapshot_data：应用程序数据段")]),t._v(" "),s("li",[t._v("fonts：字体库")]),t._v(" "),s("li",[t._v("packages：Flutter资源库")]),t._v(" "),s("li",[t._v("FontManifest.json：字体的Manifest")]),t._v(" "),s("li",[t._v("AssetManifest.json：资源的Manifest")])])]),t._v(" "),s("li",[s("p",[t._v("flutter_shared 目录")]),t._v(" "),s("p",[t._v("icudtl.dat：该文件的作用是告诉Flutter如何使用unicode进行国际文本处理，用于国际化的。")])])]),t._v(" "),s("h4",{attrs:{id:"classes-dex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classes-dex"}},[t._v("#")]),t._v(" classes.dex")]),t._v(" "),s("p",[t._v("Flutter 的 Android 代码编译成的 classes.dex。")]),t._v(" "),s("h4",{attrs:{id:"res-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#res-目录"}},[t._v("#")]),t._v(" res 目录")]),t._v(" "),s("p",[t._v("Flutter 的 Android 工程的资源文件。")]),t._v(" "),s("h2",{attrs:{id:"flutter-android-release-安装包分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-android-release-安装包分析"}},[t._v("#")]),t._v(" Flutter Android Release 安装包分析")]),t._v(" "),s("p",[t._v("连接了 Android 真机，构建 Release 模式，在 Flutter 目录下，找到 "),s("code",[t._v("build/app/outputs/apk/release/app-release.apk")]),t._v(" ,就是 Android 的 Release 安装包，安装包里的内容如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a66c1541e605?w=2396&h=300&f=jpeg&s=91944",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"lib-目录下的-flutter-engine-so"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lib-目录下的-flutter-engine-so"}},[t._v("#")]),t._v(" lib 目录下的 Flutter Engine so")]),t._v(" "),s("p",[t._v("lib 目录下是 Flutter Engine 的 so：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a6778d20ff7b?w=2330&h=218&f=jpeg&s=67804",alt:""}})]),t._v(" "),s("p",[t._v("总共有两个平台的 so：")]),t._v(" "),s("ul",[s("li",[t._v("arm64-v8a")]),t._v(" "),s("li",[t._v("armeabi-v7a")])]),t._v(" "),s("p",[s("em",[s("strong",[t._v("大小问题：")])])]),t._v(" "),s("p",[t._v("总大小是 5.9M ，占到整个 apk 安装包的 75.3%，如果想要继续优化 so 的大小，可以只用 areabi-v7a 的 so。")]),t._v(" "),s("h4",{attrs:{id:"assets-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#assets-目录"}},[t._v("#")]),t._v(" assets 目录")]),t._v(" "),s("p",[t._v("assets 目录下的都是 Flutter 生成的产物。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a6a01ba9d4e1?w=2212&h=524&f=jpeg&s=134943",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("isolate_snapshot_data：应用程序数据段")]),t._v(" "),s("li",[t._v("isolate_snapshot_instr： 应用程序指令段")]),t._v(" "),s("li",[t._v("vm_snapshot_data：VM虚拟机数据段")]),t._v(" "),s("li",[t._v("vm_snapshot_data： VM虚拟机数据段")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("flutter_assets 目录")]),t._v(" "),s("ul",[s("li",[t._v("fonts：字体库")]),t._v(" "),s("li",[t._v("packages：Flutter资源库")]),t._v(" "),s("li",[t._v("FontManifest.json：字体的Manifest")]),t._v(" "),s("li",[t._v("AssetManifest.json：资源的Manifest")])])]),t._v(" "),s("li",[s("p",[t._v("flutter_shared 目录")]),t._v(" "),s("p",[t._v("icudtl.dat：该文件的作用是告诉Flutter如何使用unicode进行国际文本处理，用于国际化的。")])])]),t._v(" "),s("h4",{attrs:{id:"classes-dex-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#classes-dex-2"}},[t._v("#")]),t._v(" classes.dex")]),t._v(" "),s("p",[t._v("Flutter 的 Android 代码编译成的 classes.dex。")]),t._v(" "),s("h4",{attrs:{id:"res-目录-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#res-目录-2"}},[t._v("#")]),t._v(" res 目录")]),t._v(" "),s("p",[t._v("Flutter 的 Android 工程的资源文件。")]),t._v(" "),s("h2",{attrs:{id:"flutter-ios-debug-安装包分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-ios-debug-安装包分析"}},[t._v("#")]),t._v(" Flutter iOS Debug 安装包分析")]),t._v(" "),s("p",[t._v("如果前面你连接了 iOS 模拟器或真机，并且按照前面几节的操作运行了 Flutter APP，那么在 Flutter 目录下，找到 "),s("code",[t._v("build/Debug-iphonesimulator/Runner")]),t._v(" 或者 "),s("code",[t._v("build/iphonesimulator/Runner")]),t._v(" ,就是 iOS 的 Debug 安装包，安装包里的内容如下图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a723771e601b?w=1248&h=1102&f=jpeg&s=263430",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"frameworks-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frameworks-目录"}},[t._v("#")]),t._v(" Frameworks 目录")]),t._v(" "),s("p",[t._v("Frameworks 目录下的 framework 有：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a743146eec59?w=498&h=116&f=jpeg&s=20231",alt:""}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("App.frmework")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a84a00b152d1?w=1242&h=196&f=jpeg&s=38772",alt:""}})]),t._v(" "),s("p",[t._v("Flutter 的 iOS 代码编译成的 framework。")]),t._v(" "),s("p",[t._v("用 file 命令查看 App.frmework 支持的架构:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ file Runner.app/Frameworks/App.framework/App\nRunner.app/Frameworks/App.framework/App: Mach-O 64-bit dynamically linked shared library x86_64\n\n")])])]),s("p",[t._v("只支持 x86_64 一种架构。")])]),t._v(" "),s("li",[s("p",[t._v("Flutter.frmework")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a85156968e8f?w=1192&h=218&f=jpeg&s=42191",alt:""}})]),t._v(" "),s("p",[t._v("Flutter 的库和引擎。")]),t._v(" "),s("p",[t._v("用 file 命令查看 Flutter.frmework 支持的架构:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ file Runner.app/Frameworks/Flutter.framework/Flutter\nRunner.app/Frameworks/Flutter.framework/Flutter: Mach-O universal binary with 1 architecture: [x86_64:Mach-O 64-bit dynamically linked shared library x86_64]\nRunner.app/Frameworks/Flutter.framework/Flutter (for architecture x86_64):\tMach-O 64-bit dynamically linked shared library x86_64\n\n")])])]),s("p",[t._v("只支持 x86_64 一种架构。")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Flutter.framework 还有 icudtl.dat")]),t._v(" "),s("p",[t._v("icudtl.dat：该文件的作用是告诉Flutter如何使用unicode进行国际文本处理，用于国际化的。")])])])])]),t._v(" "),s("p",[s("em",[s("strong",[t._v("大小问题：")])])]),t._v(" "),s("p",[t._v("App.framework 总大小 26k，Flutter.framework 的总大小为 25.7M。Debug 模式下的大小没有参考意义，因为 Debug 不会是正式发布的包。")]),t._v(" "),s("h4",{attrs:{id:"flutter-assets-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#flutter-assets-目录"}},[t._v("#")]),t._v(" flutter_assets 目录")]),t._v(" "),s("p",[t._v("assets 目录下的都是 Flutter 生成的产物。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/23/1691a82520a0f293?w=1262&h=358&f=jpeg&s=73981",alt:""}})]),t._v(" "),s("p",[t._v("这里的产物是 iOS 和 Android 是一样的，只是路径有些不同。")]),t._v(" "),s("ul",[s("li",[t._v("kernel_blob.bin：由Flutter代码生成")]),t._v(" "),s("li",[t._v("vm_snapshot_data：VM虚拟机数据段")]),t._v(" "),s("li",[t._v("isolate_snapshot_data：应用程序数据段")]),t._v(" "),s("li",[t._v("fonts：字体库")]),t._v(" "),s("li",[t._v("packages：Flutter资源库")]),t._v(" "),s("li",[t._v("FontManifest.json：字体的Manifest")]),t._v(" "),s("li",[t._v("AssetManifest.json：资源的Manifest")])])])}),[],!1,null,null,null);e.default=r.exports}}]);