(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{539:function(e,t,n){"use strict";n.r(t);var a=n(42),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"ç¬¬-6-èŠ‚-å¤æ‚æ•°æ®å¤„ç†-Â·-ä½¿ç”¨åºåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬-6-èŠ‚-å¤æ‚æ•°æ®å¤„ç†-Â·-ä½¿ç”¨åºåˆ—"}},[e._v("#")]),e._v(" ç¬¬ 6 èŠ‚ å¤æ‚æ•°æ®å¤„ç† Â· ä½¿ç”¨åºåˆ—")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å¸¸ä½¿ç”¨æ•°ç»„ä½œä¸ºå­˜å‚¨ä¸€"),n("strong",[e._v("ç³»åˆ—")]),e._v("æ•°æ®çš„æ–¹å¼ï¼Œè€Œåœ¨ JavaScript ä¸­æ•°ç»„æ˜¯éå¸¸å¼ºè°ƒé¡ºåºçš„ä¸€ç§æ•°æ®ç»“æ„ã€‚ä½†æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å®Œå…¨éµå®ˆç­‰é—´è·çš„ã€‚å¯èƒ½æ¯ä¸¤ä¸ªæ•°æ®ä¹‹é—´ä»ç‰¹å®šçš„ç»´åº¦ä¸Šè§‚å¯Ÿæ˜¯å‘ˆç°çš„é—´æ–­æ€§ï¼Œè€Œéè¿ç»­æ€§ã€‚")]),e._v(" "),n("p",[e._v("å…¶ä¸­æœ€ä¸ºå…¸å‹çš„å°±æ˜¯æ—¶é—´åºåˆ—ï¼Œä»ç‰©ç†ä¼ æ„Ÿå™¨ä¼ æ¥çš„æ•°æ®ã€æ™ºèƒ½ç©¿æˆ´è®¾å¤‡çš„è®°å½•æ•°æ®ç­‰ç­‰éƒ½æ˜¯ç»å¸¸ä¼šå‡ºç°ä¸è¿ç»­çš„ç°è±¡ï¼Œè¿™äº›æ•°æ®ä»æ—¶é—´ç»´åº¦ä¸Šè§‚æµ‹ä¼šå‘ç°åŸºæœ¬ä¸Šæ˜¯æ— è§„å¾‹é—´éš™æ€§çš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½ç®€å•åœ°ä½¿ç”¨æ•°ç»„è¿›è¡Œè®°å½•ã€‚")]),e._v(" "),n("p",[e._v("ä¸ºäº†æ›´ä¸ºå‡†ç¡®åœ°è®°å½•å’Œè¡¨è¾¾è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°ç¬¬ 4 èŠ‚ä¸­æˆ‘ä»¬æ‰€æåˆ°çš„â€œæ›´å¼ºâ€çš„æ•°ç»„ã€‚å°†ç”¨äºè¡¨è¾¾é¡ºåºçš„æ ‡ç­¾ä» JavaScript æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œæ”¹å˜ä¸ºå¯¹è±¡å…ƒç´ ä¸­çš„æŸä¸€ä¸ªæ ‡ç­¾ã€‚")]),e._v(" "),n("h2",{attrs:{id:"_6-1-æ—¶é—´åºåˆ—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-æ—¶é—´åºåˆ—"}},[e._v("#")]),e._v(" 6.1 æ—¶é—´åºåˆ—")]),e._v(" "),n("p",[e._v("æ—¶é—´åºåˆ—ä¸€èˆ¬ç”¨äºè¡¨è¾¾ä¸€ç»„å»ºç«‹åœ¨æ—¶é—´è½´ä¸Šçš„æ•°æ®ï¼Œæ¯”å¦‚å·¥ä¸šç”Ÿäº§è®¾å¤‡ä¸­ä¼ æ„Ÿå™¨æ‰€å®šæ—¶è®°å½•çš„æ•°æ®ï¼Œä½†ç”±äºä¼ æ„Ÿå™¨è®¾å¤‡åŒæ ·å­˜åœ¨è¯¯å·®ï¼Œè€Œä¸”ç”±äºå®é™…åº”ç”¨ä¸­ä¹Ÿæœ‰å¯èƒ½å‡ºç°ä¸å·¥ä½œçš„æƒ…å†µï¼Œæ‰€ä»¥çœŸæ­£æ‰€è®°å½•ä¸‹æ¥çš„æ•°æ®å¾ˆæœ‰å¯èƒ½æ˜¯æ–­æ–­ç»­ç»­çš„ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/4/7/162a021d0b5853c5?w=414&h=89&f=png&s=5731",alt:"æ—¶é—´åºåˆ—"}})]),e._v(" "),n("p",[e._v("åœ¨è¿™å›¾ä¸­ä½ ä¼šçœ‹åˆ°å¹¶ä¸æ˜¯æ¯ä¸€ç§’é’Ÿéƒ½ä¼šè®°å½•æœ‰æ•°æ®ï¼Œè¿™ç§æ•°æ®é›†æˆ‘ä»¬å¯ä»¥å°†å…¶ç§°ä¸ºç¨€ç–åºåˆ—ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ’å€¼ã€æ‹Ÿåˆç­‰æ–¹å¼å°†è¿™äº›ç©ºç¼ºçš„æ•°æ®è¡¥ä¸Šï¼Œä½†æ˜¯è¿™æ¶‰åŠæ›´ä¸ºå¤æ‚çš„æ•°å­¦è¿ç®—æ‰€ä»¥ä¸ä¼šåœ¨æœ¬å°å†Œçš„è®¨è®ºèŒƒå›´ä¹‹å†…ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥è¯¢â€œæ•°å€¼è®¡ç®—â€ç›¸å…³çš„æ–‡çŒ®å’Œä¹¦ç±è¿›è¡Œå­¦ä¹ ã€‚")]),e._v(" "),n("p",[e._v("å›åˆ°æ­£é¢˜ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨â€œæ›´å¼ºâ€çš„æ•°ç»„æ¥è¿›è¡Œå¯¹æ—¶é—´åºåˆ—çš„å­˜å‚¨ï¼Œé‚£ä¹ˆè‡ªç„¶å°±æ„å‘³ç€æ•°ç»„å…ƒç´ ä¸­å¿…å®šåŒ…å«ç”¨äºå­˜å‚¨æ¯ä¸€ä¸ªæ•°æ®ç‚¹æ‰€å¯¹åº”çš„æ—¶é—´æˆ³ï¼ˆTimestampï¼‰ã€‚åœ¨ JavaScript ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨æ¯«ç§’çº§ Unix æ—¶é—´æˆ³ä½œä¸ºæ—¶é—´çš„åŸºæœ¬è¡¨è¾¾æ–¹å¼ã€‚æ¯«ç§’çº§ Unix æ—¶é—´æˆ³å³ä»¥æ ¼æ—å°¼æ²»æ—¶é—´ 1970 å¹´ 1 æœˆ 1 æ—¥ 0 ç‚¹ 0 åˆ†å¼€å§‹ï¼Œæ¯ç»è¿‡ä¸€æ¯«ç§’ï¼ˆ"),n("img",{attrs:{src:"https://juejin.im/equation?tex=%5Cfrac%7B1%7D%7B1000%7D",alt:"\\frac{1}{1000}"}}),e._v(" ç§’ï¼‰å³è®°æ•° 1ã€‚å¦‚ 2018 å¹´ 1 æœˆ 1 æ—¥ 0 æ—¶ 0 åˆ†æ•´ç‚¹ä½¿ç”¨æ¯«ç§’çº§ Unix æ—¶é—´æˆ³åˆ™ä¸º 1514736000000ã€‚")]),e._v(" "),n("p",[e._v("åœ¨ JavaScript ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ "),n("code",[e._v("Date.now()")]),e._v(" æ–¹æ³•æ¥è·å–å½“å‰è®¾å¤‡ä¸­æ‰€è®°å½•çš„å½“å‰æ¯«ç§’çº§ Unix æ—¶é—´æˆ³ã€‚åŒæ ·çš„ä¹Ÿå¯ä»¥ä½¿ç”¨ "),n("code",[e._v("new Date(timestamp)")]),e._v(" çš„æ–¹å¼å°†ä»¥æ•°å€¼ä¸ºè¡¨è¾¾æ–¹å¼çš„æ—¶é—´æˆ³è½¬æ¢ä¸ºä»¥ JavaScript ä¸­ç”¨äºè¡¨è¾¾æ—¶é—´ï¼ˆåŒ…æ‹¬æ—¥æœŸå’Œæ—¶é—´ï¼‰çš„ "),n("code",[e._v("Date")]),e._v(" ç±»å‹ã€‚")]),e._v(" "),n("p",[e._v("å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹è®°è´¦æ•°æ®ï¼Œå¹¶ä»¥æ—¶é—´åºåˆ—çš„å½¢å¼å­˜å‚¨ã€‚")]),e._v(" "),n("p",[e._v("æ—¶é—´")]),e._v(" "),n("p",[e._v("ç±»å‹")]),e._v(" "),n("p",[e._v("ä»·æ ¼")]),e._v(" "),n("p",[e._v("Thu Mar 01 2018 08:31:32")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("6.00")]),e._v(" "),n("p",[e._v("Thu Mar 01 2018 11:27:52")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("12.00")]),e._v(" "),n("p",[e._v("Thu Mar 01 2018 18:24:09")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("52.50")]),e._v(" "),n("p",[e._v("Fri Mar 02 2018 09:14:09")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("4.50")]),e._v(" "),n("p",[e._v("Fri Mar 02 2018 11:58:22")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("13.50")]),e._v(" "),n("p",[e._v("Fri Mar 02 2018 22:10:49")]),e._v(" "),n("p",[e._v("é¤é¥®")]),e._v(" "),n("p",[e._v("104.25")]),e._v(" "),n("p",[e._v("è¿™æ˜¯æŸäººä¸¤å¤©çš„ä¸€æ—¥ä¸‰é¤è®°è´¦è®°å½•ï¼Œå‡è®¾æˆ‘ä»¬ä½¿ç”¨ JavaScript çš„å½¢å¼è¿›è¡Œå­˜å‚¨çš„è¯å°±å¯ä»¥ä½¿ç”¨ä»¥å¸¦æœ‰æ—¶é—´æˆ³ "),n("code",[e._v("timestamp")]),e._v(" å±æ€§çš„å¯¹è±¡ä½œä¸ºæ•°ç»„çš„å…ƒç´ ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let transactions = [\n  {\n    timestamp: 1519864292535,\n    category: 'é¤é¥®',\n    price: 6.00\n  },\n  {\n    timestamp: 1519874872261,\n    category: 'é¤é¥®',\n    price: 12.00\n  },\n  {\n    timestamp: 1519899849526,\n    category: 'é¤é¥®',\n    price: 52.50\n  },\n  {\n    timestamp: 1519953249020,\n    category: 'é¤é¥®',\n    price: 4.50\n  },\n  {\n    timestamp: 1519963102270,\n    category: 'é¤é¥®',\n    price: 13.50\n  },\n  {\n    timestamp: 1519999849526,\n    category: 'é¤é¥®',\n    price: 104.25\n  }\n]\n\n")])])]),n("p",[e._v("å¦‚æœæˆ‘ä»¬å°†è¿™äº›æ•°æ®æ”¾åˆ°æ—¶é—´è½´ä¸Šï¼Œå°±å¯ä»¥å‘ç°è¿™äº›è®°å½•å€¼é—´æ­‡æ€§åœ°åˆ†å¸ƒåœ¨æ—¶é—´è½´ä¸Šï¼Œä¸­é—´çš„é—´éš”ä¹Ÿå¹¶éä¸€å®šã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/4/7/162a021d0b6e7053?w=1625&h=318&f=png&s=27570",alt:"time-series-demo"}})]),e._v(" "),n("h3",{attrs:{id:"_6-1-1-å¤„ç†æ—¶é—´"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-1-å¤„ç†æ—¶é—´"}},[e._v("#")]),e._v(" 6.1.1 å¤„ç†æ—¶é—´")]),e._v(" "),n("p",[e._v("åœ¨æ—¶é—´åºåˆ—ä¸­ï¼Œé¡¾åæ€ä¹‰å…¶æœ€é‡è¦çš„å‚æ•°ä¾¿æ˜¯åºåˆ—å…ƒç´ ä¸­çš„æ—¶é—´æˆ³ã€‚ä½†ç”±äºåœ¨å®é™…ç ”ç©¶å’Œåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¤§å¤šå¹¶ä¸éœ€è¦å°†ç»Ÿè®¡åˆ†æçš„ç²¾åº¦ç²¾ç¡®åˆ°æ¯«ç§’çº§æˆ–æ˜¯ç§’çº§ï¼Œæ›´å¤šçš„æƒ…å†µæ˜¯ä»¥æ¯å¤©ã€æ¯å‘¨ã€æ¯æœˆå’Œæ¯å¹´çš„æ–¹å¼è¿›è¡Œç»Ÿè®¡ã€‚")]),e._v(" "),n("p",[e._v("æ‰€ä»¥æˆ‘ä»¬åœ¨å¤„ç†æ—¶é—´åºåˆ—çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦åšçš„æ˜¯å¦‚ä½•å°†æ—¶é—´åºåˆ—ä¸­çš„é«˜ç²¾ç¡®åº¦è®°å½•æ•°æ®è¿›è¡Œæ•´åˆï¼Œé¦–å…ˆèšåˆå‡ºä¸€å®šæ—¶é—´èŒƒå›´å†…çš„å¹³å‡ã€æ€»ä½“è®°å½•ç»“æœã€‚")]),e._v(" "),n("p",[e._v("åœ¨ JavaScript ä¸­å¤„ç†æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆä½¿ç”¨ "),n("code",[e._v("Date")]),e._v(" ç±»å‹å°†ä»¥æ•´å‹ä¸ºå­˜å‚¨ä»‹è´¨çš„æ—¶é—´æˆ³è½¬æ¢ä¸º "),n("code",[e._v("Date")]),e._v(" ç±»å‹ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("transactions = transactions.map(function(data) {\n  data.timestamp = new Date(data.timestamp)\n  return data\n})\n\n")])])]),n("p",[e._v("è¿™æ ·æˆ‘ä»¬å°±å·²ç»å°†ç°æœ‰æ•°æ®ä¸­çš„æ—¶é—´æˆ³å˜æˆäº†å¯ä»¥ç”¨äºè¿›è¡Œè¯¦ç»†æ“ä½œçš„ "),n("code",[e._v("Date")]),e._v(" ç±»å‹å¯¹è±¡ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å°†å…¶è¿›è¡Œæ—¶é—´èŒƒå›´çš„åˆ†ç»„æ“ä½œã€‚")]),e._v(" "),n("p",[e._v("ä½†æ˜¯è·Ÿ JavaScript ä¸­çš„æ•°ç»„ä¸€æ ·ï¼ŒJavaScript ä¸­çš„ "),n("code",[e._v("Date")]),e._v(" å¯¹è±¡è™½ç„¶æœ¬èº«ä¹Ÿå·²ç»æä¾›äº†éå¸¸å¤šå¾ˆå®ç”¨çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™è¿œè¿œä¸è¶³ä»¥æ»¡è¶³æˆ‘ä»¬çš„å®é™…éœ€æ±‚ã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†æ¬¡å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹å·¥å…·åº“ Moment.jsã€‚")]),e._v(" "),n("h4",{attrs:{id:"å¼•å…¥-moment-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥-moment-js"}},[e._v("#")]),e._v(" å¼•å…¥ Moment.js")]),e._v(" "),n("p",[e._v("Moment.js æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç† JavaScript ä¸­ "),n("code",[e._v("Date")]),e._v(" ç±»å‹æ•°æ®çš„å·¥å…·åº“ï¼Œå®ƒé™¤äº†æä¾›ç”¨äºè®¾ç½®å’Œæå–æ—¶é—´å¯¹è±¡ä¸­çš„å„ç§å‚æ•°ï¼ˆæ—¶ã€åˆ†ã€ç§’ã€æ—¥æœŸç­‰ï¼‰å¤–ï¼Œè¿˜å¯ä»¥æ ¹æ®ä¸åŒçš„è¡¨è¾¾æ ¼å¼è¿›è¡Œå­—ç¬¦ä¸²æ¸²æŸ“ï¼Œå¾—åˆ°éœ€è¦çš„æ—¶é—´æ ¼å¼ã€‚")]),e._v(" "),n("p",[e._v("å°†ä»¥ä¸‹ HTML æ ‡ç­¾ç›´æ¥åŠ å…¥åˆ° "),n("code",[e._v("head")]),e._v(" å¤´éƒ¨ä¸­ï¼Œæˆ–è€…åœ¨ CodePen çš„è®¾ç½®ä¸­åŠ å…¥ Moment.js çš„é“¾æ¥å³å¯ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('<script type="application/javascript" src="https://cdn.staticfile.org/moment.js/2.21.0/moment.min.js"><\/script>\n\n')])])]),n("p",[e._v("åœ¨ä½¿ç”¨ Moment.js ä¹‹å‰ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦å°†æ—¶é—´æˆ³è½¬æ¢ä¸º "),n("code",[e._v("Moment")]),e._v(" ç±»çš„å¯¹è±¡ï¼Œæ”¯æŒç›´æ¥å°†ä»¥æ•´å‹çš„æ—¶é—´æˆ³æˆ– "),n("code",[e._v("Date")]),e._v(" ç±»å‹è½¬æ¢ä¸º "),n("code",[e._v("Moment")]),e._v(" å¯¹è±¡ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("transactions = transactions.map(function(data) {\n  data.moment = moment(data.timestamp)\n  return data\n})\n\n")])])]),n("h4",{attrs:{id:"æŒ‰å¤©åˆ†ç»„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‰å¤©åˆ†ç»„"}},[e._v("#")]),e._v(" æŒ‰å¤©åˆ†ç»„")]),e._v(" "),n("p",[e._v("å¯¹äºè®°è´¦æ•°æ®æ¥è¯´ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬éœ€è¦è¿›è¡Œæœ€å°é¢—ç²’ç»Ÿè®¡ä¾¿æ˜¯ä»¥å¤©ä¸ºå•ä½çš„è®¡ç®—ã€‚é‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆå°±éœ€è¦å¯¹è®°å½•æ•°æ®ä¸­çš„æ—¶é—´æˆ³è¿›è¡Œå¤„ç†ï¼Œå¾—åˆ°å¯¹åº”çš„æ—¥æœŸã€‚")]),e._v(" "),n("p",[e._v("ä½¿ç”¨ Moment.js è¿›è¡Œæ—¥æœŸæå–éå¸¸ç®€å•ï¼ŒMoment.js å…è®¸å¯¹æ—¶é—´å¯¹è±¡è¿›è¡Œæ ¼å¼åŒ–ã€‚æ¯”å¦‚æˆ‘ä»¬è‹¥éœ€è¦å°†æ—¶é—´è½¬æ¢ä¸ºä»¥ "),n("code",[e._v("å¹´-æœˆ-æ—¥")]),e._v(" ä¸ºæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥ä½¿ç”¨ "),n("code",[e._v("moment.format('YYYY-MM-DD')")]),e._v(" è¿›è¡Œæ ¼å¼åŒ–ã€‚")]),e._v(" "),n("p",[e._v("ç»“åˆå‰é¢æˆ‘ä»¬å­¦ä¹ è¿‡çš„ LoDash å·¥å…·åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ "),n("code",[e._v("_.groupBy")]),e._v(" å‡½æ•°è¿›è¡Œåˆ†ç»„ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('const transactionsGroupedByDate = _.groupBy(transactions, function(transaction) {\n  return transaction.moment.format(\'YYYY-MM-DD\')\n})\n\nconsole.log(transactionsGroupedByDate)\n// => {\n//  "2018-03-01": [{...}, {...}],\n//  "2018-03-02": [{...}, {...}]\n// }\n\n')])])]),n("h4",{attrs:{id:"æŒ‰å‘¨åˆ†ç»„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‰å‘¨åˆ†ç»„"}},[e._v("#")]),e._v(" æŒ‰å‘¨åˆ†ç»„")]),e._v(" "),n("p",[e._v("é™¤äº†æŒ‰å¤©è®¡ç®—ä»¥å¤–ï¼Œæˆ‘ä»¬å¯¹äºæˆ‘ä»¬çš„è®°è´¦æ•°æ®å¾€å¾€å¯¹æ¯å‘¨çš„å¼€é”€æ›´ä¸ºçœ‹é‡ã€‚ç„¶è€Œå®é™…ä¸Šå¦‚ä½•æŠŠæ—¶é—´æŒ‰å‘¨åˆ†ç»„ç¡®å®æ˜¯ä¸€ä¸ªâ€œæŠ€æœ¯æ´»â€ï¼Œå› ä¸ºæˆ‘ä»¬å¾€å¾€ä¸èƒ½ä¿è¯æ¯å¹´ 1 æœˆ 1 æ—¥å’Œæ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©éƒ½æ˜¯å‘¨æ—¥ï¼ˆæ¯å‘¨çš„ç¬¬ä¸€å¤©ï¼‰ã€‚")]),e._v(" "),n("p",[e._v("ä¸€èˆ¬æƒ…å†µä¸‹ä¸€å¹´æœ‰ 365 å¤©ï¼ˆé—°å¹´æœ‰ 366 å¤©ï¼‰ï¼Œä»¥ä¸€å‘¨ 7 å¤©ä¸ºæ ‡å‡†ï¼Œæ‰€ä»¥ä¸€å¹´å°±æœ‰ "),n("img",{attrs:{src:"https://juejin.im/equation?tex=%5Cfrac%7B365%7D%7B7%7D%3D52%5Cfrac%7B1%7D%7B7%7D",alt:"\\frac{365}{7}=52\\frac{1}{7}"}}),e._v(" å‘¨ï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´æœ‰ 52 ä¸ªæ˜ŸæœŸå¤šä¸€åˆ°ä¸¤å¤©ã€‚")]),e._v(" "),n("p",[e._v("å¦‚æœä¸¥æ ¼ä½¿ç”¨å‘¨æ—¥ä¸ºä¸€å‘¨çš„ç¬¬ä¸€å¤©åŸåˆ™ï¼Œå°±éœ€è¦ç²¾ç¡®åˆ°å¤©æ¥ç¡®å®šæŸä¸€å¤©å¤„åœ¨äºæŸä¸€å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸã€‚å½“ç„¶æˆ‘ä»¬ä¸éœ€è¦å¤ªè¿‡äºçº ç»“äºè¿™ä¸ªï¼Œå› ä¸º Moment.js å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½è¿™æ ·çš„è½¬æ¢å·¥å…·äº†ã€‚")]),e._v(" "),n("p",[e._v("åœ¨è°ƒç”¨ "),n("code",[e._v("moment.format(pattern)")]),e._v(" æ–¹æ³•æ—¶ä½¿ç”¨ "),n("code",[e._v('"WW"')]),e._v(" å¯ä»¥è·å–ä¸¤ä½æ•°çš„å‘¨æ•°ï¼ˆ"),n("code",[e._v("01")]),e._v(" ~ "),n("code",[e._v("53")]),e._v("ï¼‰ï¼Œä¸ºäº†æ ¹æ®å‘¨åˆ†ç»„æˆ‘ä»¬å¯ä»¥æŒ‰ "),n("code",[e._v('"YYYY-WW"')]),e._v(" ä½œä¸ºåˆ†ç»„æ ‡ç­¾ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const transactionsGroupedByWeek = _.groupBy(transactions, function(transaction) {\n  return transaction.moment.format('YYYY-WW')\n})\n\nconsole.log(transactionsGroupedByWeek)\n// => {\n//   \"2018-09\": [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]\n// }\n\n")])])]),n("h4",{attrs:{id:"æŒ‰æœˆã€å¹´åˆ†ç»„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æŒ‰æœˆã€å¹´åˆ†ç»„"}},[e._v("#")]),e._v(" æŒ‰æœˆã€å¹´åˆ†ç»„")]),e._v(" "),n("p",[e._v("é™¤äº†æŒ‰æ˜ŸæœŸä½œä¸ºåˆ†ç»„ä»¥å¤–ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦çœ‹çœ‹æˆ‘ä»¬ä¸€ä¸ªæœˆå†…æˆ‘ä»¬ç©¶ç«ŸèŠ±äº†å¤šå°‘é’±ï¼Œè€Œä¸”å¯¹äºä¸ªä½“æˆ·æ¥è¯´ä¸€ä¸ªæœˆçš„æ”¶æ”¯æ›´æ˜¯é‡è¦ã€‚æŒ‰æœˆåˆ†ç»„è·ŸæŒ‰å‘¨åˆ†ç»„éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯åœ¨è°ƒç”¨ "),n("code",[e._v("moment.format(pattern)")]),e._v(" æ—¶ï¼Œå°† "),n("code",[e._v('"WW"')]),e._v(" æ”¹æˆ "),n("code",[e._v('"MM"')]),e._v(" å³å¯ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const transactionsGroupedByMonth = _.groupBy(transactions, function(transaction) {\n  return transaction.moment.format('YYYY-MM')\n})\n\nconsole.log(transactionsGroupedByMonth)\n// => {\n//   \"2018-03\": [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]\n// }\n\n")])])]),n("p",[e._v("æŒ‰ç…§å¹´æ¥åˆ†ç»„åˆ™åŒç†ï¼Œå¯¹æ ¼å¼åŒ–æ–¹å¼è¿›è¡Œæ›´æ”¹å°±å¯ä»¥äº†ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const transactionsGroupedByYear = _.groupBy(transactions, function(transaction) {\n  return transaction.moment.format('YYYY')\n})\n\nconsole.log(transactionsGroupedByYear)\n// => {\n//   \"2018\": [{â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}, {â€¦}]\n// }\n\n")])])]),n("h4",{attrs:{id:"åˆ†ç»„æ•´åˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†ç»„æ•´åˆ"}},[e._v("#")]),e._v(" åˆ†ç»„æ•´åˆ")]),e._v(" "),n("p",[e._v("æ˜¯å¦è§‰å¾—æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ—¶é—´å•ä½åœ°åˆ†åˆ«è¿›è¡Œåˆ†ç»„å¤ªéº»çƒ¦äº†ï¼Ÿä¸ç”¨æ‹…å¿ƒï¼Œå›æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨è¿›è¡Œæ•°ç»„æ“ä½œçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ›¾ä¸ºæ•°ç»„çš„æ“ä½œå°è£…è¿‡ä¸€ä¸ªå·¥å…·ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹ŸåŒæ ·å¯ä»¥ä¸ºæ—¶é—´åºåˆ—å°è£…ä¸€ä¸ªå·¥å…·æ¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨æ—¶é—´åºåˆ—ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function createTimeSeries(timeSeriesArray) {\n  const timeSeriesObj = {\n    array: timeSeriesArray.map(function(data) {\n      data.moment = moment(data.timestamp)\n\n      return data\n    }),\n\n    groupByFormat(formatPattern) {\n      return _.groupBy(timeSeriesObj.array, function(data) {\n        return data.moment.format(formatPattern)\n      })\n    },\n\n    groupByDate() {\n      return timeSeriesObj.groupByFormat('YYYY-MM-DD')\n    },\n\n    groupByWeek() {\n      return timeSeriesObj.groupByFormat('YYYY-WW')\n    },\n\n    groupByMonth() {\n      return timeSeriesObj.groupByFormat('YYYY-MM')\n    },\n\n    groupByYear() {\n      return timeSeriesObj.groupByFormat('YYYY')\n    }\n\n    // ...\n\n  }\n\n  return timeSeriesObj\n}\n\nconst timeSeries = createTimeSeries(transactions)\nconsole.log(timeSeries.groupByMonth())\n\n")])])]),n("h3",{attrs:{id:"_6-1-2-æ—¶é—´åºåˆ—ç»Ÿè®¡è®¡ç®—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-2-æ—¶é—´åºåˆ—ç»Ÿè®¡è®¡ç®—"}},[e._v("#")]),e._v(" 6.1.2 æ—¶é—´åºåˆ—ç»Ÿè®¡è®¡ç®—")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å·²ç»å°†è´¦å•æ•°æ®æŒ‰ç…§æ—¶é—´è¿›è¡Œäº†åˆ†ç»„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªè®°è´¦è½¯ä»¶çš„æ—¶å€™éš¾é“åªä¼šçœ‹æŸä¸€å¤©æˆ‘èŠ±äº†"),n("strong",[e._v("å“ªäº›")]),e._v("é’±å—ï¼Ÿæˆ‘è‡ªç„¶å¸Œæœ›èƒ½å¤ŸçŸ¥é“è¿™ä¸€å¤©æˆ‘èŠ±äº†å¤šå°‘é’±ã€ä¸€å‘¨å†…èŠ±äº†å¤šå°‘é’±ã€ä¸€ä¸ªæœˆå†…èŠ±äº†å¤šå°‘é’±ã€ä¸€èˆ¬æ˜¯å‘¨å‡ çš„æ—¶å€™èŠ±é’±æœ€å¤šã€ä¸€å‘¨å¹³å‡æ¯å¤©èŠ±å¤šå°‘é’±ç­‰ç­‰è®¡ç®—ç»“æœã€‚")]),e._v(" "),n("p",[e._v("è€Œæˆ‘ä»¬å‰é¢å·²ç»å°†æ•°æ®æŒ‰å‘¨ã€æœˆè¿›è¡Œåˆ†ç»„ï¼Œä½†æ˜¯æˆ‘ä»¬åŒæ ·éœ€è¦åœ¨æŒ‰å‘¨ã€æœˆåˆ†ç»„ä¹‹åå†è¿›è¡ŒæŒ‰å¤©åˆ†ç»„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çœ‹åˆ°ä¸€ä¸ªæ˜ŸæœŸã€ä¸€ä¸ªæœˆå†…æ¯å¤©çš„å¼€é”€ç»Ÿè®¡ã€‚")]),e._v(" "),n("h4",{attrs:{id:"è®¡ç®—æ¯å¤©å¼€é”€æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¡ç®—æ¯å¤©å¼€é”€æƒ…å†µ"}},[e._v("#")]),e._v(" è®¡ç®—æ¯å¤©å¼€é”€æƒ…å†µ")]),e._v(" "),n("p",[e._v("è¦è®¡ç®—æ¯å¤©çš„å¼€é”€æƒ…å†µï¼Œä¸ä¸€å®šæ˜¯éœ€è¦å…ˆå°†æ•°æ®åˆ†ç»„å¥½ä»¥åå†è¿›è¡Œå¤„ç†ï¼Œè€Œæˆ‘ä»¬åœ¨è¿›è¡Œåˆ†ç»„çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥å®Œæˆæˆ‘ä»¬éœ€è¦çš„ç»Ÿè®¡è®¡ç®—ã€‚")]),e._v(" "),n("p",[e._v("é¦–å…ˆæˆ‘ä»¬ç¬¬ä¸€æ­¥å°±æ˜¯éœ€è¦ä»çŸ¥é“æ¯å¤©èŠ±äº†"),n("strong",[e._v("å“ªäº›")]),e._v("é’±ï¼Œå˜æˆçŸ¥é“æ¯å¤©èŠ±äº†å¤šå°‘é’±ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦è¿›è¡Œæ±‚å’Œè®¡ç®—ã€‚åœ¨ç¬¬ 4 èŠ‚ä¸­æˆ‘ä»¬ä»‹ç»è¿‡ LoDash å·¥å…·åº“ä¸­çš„ "),n("code",[e._v("_.sum")]),e._v(" å‡½æ•°ï¼Œè€Œ LoDash å·¥å…·åº“åŒæ—¶è¿˜æä¾›äº†ä¸€ä¸ª "),n("code",[e._v("_.sumBy")]),e._v(" å‡½æ•°ä»¥ç”¨äºå¤„ç†æˆ‘ä»¬è¾ƒä¸ºå¤æ‚çš„å¤šç»´æ•°ç»„ã€‚")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å‰é¢å®šä¹‰äº†ä¸€ä¸ª "),n("code",[e._v("timeSeriesObj.groupByFormat")]),e._v(" æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯ä¸€ä¸ªä»¥ "),n("code",[e._v("{ [date]: array }")]),e._v(" ä¸ºæ ¼å¼çš„å¯¹è±¡ï¼ˆæˆ–å«æ˜ å°„é›†ï¼‰ã€‚ä¸ºäº†é¿å…æ•°æ®äº§ç”Ÿçš„å¤§é‡å†—ä½™ï¼ˆé‡å¤ã€ä¸å¿…è¦çš„æ•°æ®ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å†å®šä¹‰ä¸€ä¸ªç»“æœå¯¹è±¡ï¼Œå°†å‰é¢çš„æ—¥æœŸé›†å¯¹è±¡ä»¥ "),n("code",[e._v("map")]),e._v(" å±æ€§å€¼å­˜å‚¨ï¼Œå¹¶ä¸”å®šä¹‰ "),n("code",[e._v("dates()")]),e._v(" ä»¥è¿”å›æ—¥æœŸå­—ç¬¦ä¸²é›†ä»¥ä¾¿æˆ‘ä»¬åé¢çš„ä½¿ç”¨ã€‚")]),e._v(" "),n("p",[e._v("å†å›åˆ°æ­£é¢˜ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°å½“å‰æ—¥æœŸé›†ä¸­æ¯ä¸€å¤©çš„å¼€é”€æ€»å’Œã€‚ä½†æ˜¯è®©æˆ‘ä»¬å†æ¬¡æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å¦ä¸€å®šè¦è®©æ¯ä¸€å¤©çš„ç»Ÿè®¡å€¼ä»¥å®ä½“æ•°æ®ï¼ˆå³å†…å­˜å˜é‡ï¼‰çš„æ–¹å¼å­˜å‚¨å‘¢ï¼Ÿå…¶å®ä¸å¿…ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ä¸€ç§"),n("strong",[e._v("è™šæ‹Ÿæ˜ å°„")]),e._v("çš„æ–¹å¼è¡¨è¾¾è¿™æ ·çš„æ•°æ®ï¼Œå³å®šä¹‰ä¸€ä¸ªè®¡ç®—å‡½æ•° "),n("code",[e._v("sum(date)")]),e._v("ï¼Œåªæœ‰å½“ä¼ å…¥æŸä¸€æ—¥æœŸçš„æ—¶å€™æ‰ä¼šè¿”å›è¯¥æ—¥æœŸçš„ç»Ÿè®¡ç»“æœï¼Œä»¥èŠ‚çœå†…å­˜ç©ºé—´ã€‚è¿™äº›æ—¥æœŸå­—ç¬¦ä¸²æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è°ƒç”¨ "),n("code",[e._v("dates")]),e._v(" å–å¾—ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function createTimeSeries(timeSeriesArray) {\n  const timeSeriesObj = {\n  \n    // ...\n\n    groupByDate() {\n      const groupedResult = {\n        map: timeSeriesObj.groupByFormat('YYYY-MM-DD'),\n\n        dates() {\n          return _.keys(groupedResult.map)\n        },\n\n        sum(date) {\n          return _.sumBy(groupedResult.map[date], 'price')\n        }\n      }\n\n      return groupedResult\n    },\n\n    // ...\n\n  }\n\n  return timeSeriesObj\n}\n\nconst timeSeries = createTimeSeries(transactions)\nconst groupedByDateSeries = timeSeries.groupByDate()\n\nconsole.log(groupedByDateSeries.dates())\n//=> [\"2018-03-01\", \"2018-03-02\"]\n\nconst firstDate = groupedByDateSeries.dates()[0]\n\nconsole.log(groupedByDateSeries.sum(firstDate))\n//=> 70.5\n\n")])])]),n("p",[e._v("å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€æ¬¡æ€§æ‰“å‡ºæ‰€æœ‰æ—¥æœŸçš„ç»Ÿè®¡ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°çµæ´»ä½¿ç”¨ "),n("code",[e._v("Array.map")]),e._v(" æ–¹æ³•å³å¯ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('groupedByDateSeries.dates().map(function(date) {\n  return {\n    date: date,\n    sum: groupedByDateSeries.sum(date)\n  }\n})\n//=> [\n//   { date: "2018-03-01", sum: 70.5 },\n//   { date: "2018-03-02", sum: 122.25 }\n// ]\n\n')])])]),n("h4",{attrs:{id:"è®¡ç®—æ¯å‘¨å¼€é”€æƒ…å†µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¡ç®—æ¯å‘¨å¼€é”€æƒ…å†µ"}},[e._v("#")]),e._v(" è®¡ç®—æ¯å‘¨å¼€é”€æƒ…å†µ")]),e._v(" "),n("p",[e._v("å®Œæˆäº†å¯¹æ¯å¤©å¼€é”€æƒ…å†µçš„ç»Ÿè®¡ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹æ›´å¤§æ—¶é—´èŒƒå›´çš„æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥çš„ç»Ÿè®¡äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€å‘¨å†…çš„ä½¿ç”¨æƒ…å†µã€‚é‚£å°±å¯ä»¥åœ¨å‰é¢æŒ‰å¤©è®¡ç®—çš„å‰æä¸‹å®Œæˆè¿™ä¸ªéœ€æ±‚ã€‚")]),e._v(" "),n("p",[e._v("äº‹å®ä¸Š Moment.js åº“éå¸¸çš„â€œèªæ˜â€ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æ£€æµ‹æˆ‘ä»¬ä¼ å…¥çš„æ—¶é—´å‚æ•°çš„æ ¼å¼ï¼ˆæ•´æ•°æ—¶é—´æˆ³ã€æ—¶é—´å­—ç¬¦ä¸²ã€æ—¥æœŸå­—ç¬¦ä¸²ç­‰ç­‰ï¼‰ï¼Œå¹¶è½¬åŒ–ä¸ºæ ‡å‡†çš„ "),n("code",[e._v("Moment")]),e._v(" æ—¶é—´å¯¹è±¡ã€‚é‚£ä¹ˆè¿™å°±æ„å‘³ç€å¯ä»¥ç›´æ¥ä¼ å…¥å‰é¢ä½¿ç”¨ "),n("code",[e._v("groupByDate.dates()")]),e._v(" æ–¹æ³•æ‰€å¾—åˆ°çš„æ—¥æœŸé›†åˆæ¥è¿›è¡Œèšåˆã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/4/7/162a021d267a4771?w=581&h=223&f=png&s=12624",alt:"date-to-week"}})]),e._v(" "),n("p",[e._v("ç›¸æ¯”äº "),n("code",[e._v("groupedByDate")]),e._v(" ç›´æ¥å»ºç«‹ä»æ—¥æœŸåˆ°æ•°æ®é›†çš„ç›´æ¥æ˜ å°„ï¼Œå‡ºäºé¿å…æ•°æ®è¿‡åº¦å†—ä½™çš„åŸåˆ™ï¼Œåœ¨è¿›è¡Œå¯¹æ˜ŸæœŸèšåˆçš„æ—¶å€™æˆ‘ä»¬é€‰æ‹©ä»æ˜ŸæœŸåˆ°æ—¥æœŸçš„æ˜ å°„ï¼Œå†ä½¿ç”¨å‰é¢ "),n("code",[e._v("groupedByDate")]),e._v(" æ‰€å»ºç«‹çš„è™šæ‹Ÿæ˜ å°„æ¥å®Œæˆæ–°çš„è™šæ‹Ÿæ˜ å°„éœ€æ±‚ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const timeSeriesObj = {\n\n  // ...\n\n  groupByWeek() {\n    const groupedByDate = timeSeriesObj.groupByDate()\n\n    const groupedResult = {\n      map: _.groupBy(groupedByDate.dates(), function(date) {\n        return moment(date).format('YYYY-WW')\n      }),\n\n      weeks() {\n        return _.keys(groupedResult.map)\n      },\n\n      sum(week) {\n        const dates = groupedResult.map[week]\n\n       return _.sumBy(dates, function(date) {\n          return groupedByDate.sum(date)\n        })\n      },\n\n      average(week) {\n        const dates = groupedResult.map[week]\n        const sum = groupedResult.sum(week)\n\n        return sum / dates.length\n      }\n    }\n\n    return groupedResult\n  },\n\n  // ...\n\n}\n\n")])])]),n("p",[e._v("ç›¸æ¯”å‰é¢çš„ "),n("code",[e._v("groupByDate")]),e._v("ï¼Œ"),n("code",[e._v("groupByWeek")]),e._v(" è¿˜å¤šäº†ä¸€ä¸ª "),n("code",[e._v("average")]),e._v(" è™šæ‹Ÿæ˜ å°„ä»¥å¾—åˆ°æŸä¸€æ˜ŸæœŸå†…æ¯å¤©å¼€é”€çš„å¹³å‡å€¼ã€‚å­¦ä¼šå¯¹æ˜ŸæœŸè¿›è¡Œåˆ†ç»„èšåˆä»¥åï¼Œå¯¹æœˆå’Œå¯¹å¹´çš„å®ç°å°±ç”±ä½ ä»¬æ¥å®Œæˆå“¦ğŸ˜ƒã€‚")]),e._v(" "),n("h4",{attrs:{id:"æ›´ä¸ºç®€å•çš„ç»„åˆæ¥å£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ›´ä¸ºç®€å•çš„ç»„åˆæ¥å£"}},[e._v("#")]),e._v(" æ›´ä¸ºç®€å•çš„ç»„åˆæ¥å£")]),e._v(" "),n("p",[e._v("æ˜¯å¦è§‰å¾—ç›®å‰å¯¹äºè·å–æ¯ä¸€ä¸ªèŒƒå›´å†…çš„å¼€é”€æ€»å’Œä»¥åŠå¹³å‡æ—¥å¼€é”€å¤ªè¿‡äºå¤æ‚ï¼Ÿä¸ç”¨æ‹…å¿ƒï¼Œç»è¿‡äº†å‰é¢å‡ èŠ‚çš„å­¦ä¹ ä¹‹åï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨å‡½æ•°å’Œå¯¹è±¡è¿›è¡Œä¸€äº›é€»è¾‘çš„å°è£…ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶å¯ä»¥å†ç»§ç»­å°†å°è£…çš„ç¨‹åº¦å¾€ä¸Šå †å ï¼Œå°† "),n("code",[e._v("sum")]),e._v(" å’Œ "),n("code",[e._v("average")]),e._v(" ä»èšåˆç»“æœä¸­æŠ½å‡ºã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function createTimeSeries(timeSeriesArray) {\n  const timeSeriesObj = {\n\n    // ...\n\n    dates() {\n      return timeSeriesObj.groupByDate().dates()\n    },\n\n    weeks() {\n      return timeSeriesObj.groupByWeek().weeks()\n    },\n\n    months() {\n      return timeSeriesObj.groupByMonth().months()\n    },\n\n    years() {\n      return timeSeriesObj.groupByYear().years()\n    },\n\n    sum(unit, point) {\n      switch (unit) {\n        case 'date':\n          return timeSeriesObj.groupByDate().sum(point)\n\n        case 'week':\n          return timeSeriesObj.groupByWeek().sum(point)\n\n        case 'month':\n          return timeSeriesObj.groupByMonth().sum(point)\n\n        case 'year':\n          return timeSeriesObj.groupByYear().sum(point)\n      }\n    },\n\n    average(unit, point) {\n      switch (unit) {\n        case 'week':\n          return timeSeriesObj.groupByWeek().average(point)\n\n        case 'month':\n          return timeSeriesObj.groupByMonth().average(point)\n\n        case 'year':\n          return timeSeriesObj.groupByYear().average(point)\n      }\n    }\n  }\n\n  return timeSeriesObj\n}\n\nconst timeSeries = createTimeSeries(transactions)\nconsole.log(timeSeries.sum('month', '2018-03')) //=> 192.75\nconsole.log(timeSeries.average('month', '2018-03')) //=> 96.375\n\n")])])]),n("h4",{attrs:{id:"é¢˜å¤–è¯-èšåˆç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é¢˜å¤–è¯-èšåˆç¼“å­˜"}},[e._v("#")]),e._v(" é¢˜å¤–è¯ï¼šèšåˆç¼“å­˜")]),e._v(" "),n("p",[e._v("ç»è¿‡äº†ä¸‰å±‚çš„å°è£…ä¹‹åï¼Œå„ç§çš„èšåˆã€æå–çš„è°ƒç”¨æ¬¡æ•°å˜å¾—æ¯”è¾ƒå¤šã€‚è€Œä¸ºäº†èƒ½å¤Ÿè®©ç¨‹åºè¿è¡Œæ›´åŠ é¡ºç•…ï¼Œå†…å­˜è°ƒåº¦æ›´ä¸ºèŠ‚çº¦ï¼Œå¯ä»¥ä½¿ç”¨æ‡’åŠ è½½çš„æ–¹å¼ç¼“å­˜ä¸€äº›ç»å¸¸ä½¿ç”¨çš„èšåˆç»“æœã€‚")]),e._v(" "),n("p",[e._v("ä¸€èˆ¬æ¥è¯´ï¼Œç¼“å­˜çš„å­˜å‚¨ä½ç½®æ˜¯åœ¨å°è£…å±‚çº§è¾ƒåº•å±‚çš„ä½ç½®ï¼Œæ¥è¿›è¡Œå­˜å‚¨å’Œè¯»å–ã€‚è€Œæˆ‘ä»¬è¿™é‡Œæœ€ä¸ºåº•å±‚çš„å°è£…ä½ç½®åˆ™æ˜¯æœ€å¼€å§‹çš„ "),n("code",[e._v("groupByFormat")]),e._v(" å‡½æ•°ã€‚")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å¯ä»¥åœ¨ "),n("code",[e._v("createTimeSeries")]),e._v(" å‡½æ•°ä¸­ã€åˆ›å»º "),n("code",[e._v("timeSeries")]),e._v(" å¯¹è±¡ä¹‹å‰å®šä¹‰ä¸€ä¸ª "),n("code",[e._v("caches")]),e._v(" å¯¹è±¡ã€‚ç„¶ååœ¨ "),n("code",[e._v("groupByFormat")]),e._v(" ä¸­é¦–å…ˆæ£€æŸ¥ "),n("code",[e._v("caches")]),e._v(" å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨å½“å‰ "),n("code",[e._v("formatPattern")]),e._v(" çš„ç»“æœç¼“å­˜ï¼Œè‹¥å­˜åœ¨åˆ™å°†å…¶ä½œä¸ºå½“å‰ç»“æœè¿”å›ï¼›åœ¨å®Œæˆè®¡ç®—åå°±å°†å…¶å­˜å‚¨åˆ° "),n("code",[e._v("caches")]),e._v(" å¯¹è±¡ä¸­ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function createTimeSeries(timeSeriesArray) {\n  const caches = {}\n  \n  const timeSeriesObj = {\n    \n    // ...\n    \n    groupByFormat(formatPattern) {\n      if (caches[formatPattern]) {\n        return caches[formatPattern]\n      }\n\n      const result = _.groupBy(timeSeriesObj.array, function(data) {\n        return data.moment.format(formatPattern)\n      })\n\n      caches[formatPattern] = result\n\n      return result\n    },\n    \n    // ...\n    \n  }\n  \n  return timeSeriesObj\n}\n\n")])])]),n("h2",{attrs:{id:"å°ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[e._v("#")]),e._v(" å°ç»“")]),e._v(" "),n("p",[e._v("åœ¨ç°ä»£ç¤¾ä¼šä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„å¤§å°å•ä½å›¢ä½“éƒ½å·²ç»ç¦»ä¸å¼€è´¦æœ¬ç³»ç»Ÿï¼Œæ— è®ºå¤§è‡³å›½å®¶å…¬å¸ï¼Œè¿˜æ˜¯å°è‡³å®¶åº­ä¸ªäººï¼Œéƒ½éœ€è¦è´¦æœ¬æ¥è®°å½•å’Œåˆ†ææ”¶æ”¯æƒ…å†µã€‚è€Œä½ å·²ç»åœ¨æœ¬èŠ‚ä¸­å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨æ•°ç»„ç±»å‹æ¥å­˜å‚¨è¿™äº›æ”¶æ”¯æ•°æ®ï¼Œéå¸¸æ£’ã€‚")]),e._v(" "),n("h3",{attrs:{id:"ä¹ é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¹ é¢˜"}},[e._v("#")]),e._v(" ä¹ é¢˜")]),e._v(" "),n("ol",[n("li",[e._v("è¯·æ ¹æ®å·²æœ‰ä»£ç ï¼Œå®Œæˆä»¥æœˆèšåˆå’Œä»¥å¹´èšåˆçš„å¤„ç†æ–¹æ³•ã€‚")]),e._v(" "),n("li",[e._v("åœ¨å®é™…æƒ…å†µä¸­ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦æ ¹æ®ä¸åŒçš„æ”¯å‡ºåˆ†ç±»ï¼ˆ"),n("code",[e._v("category")]),e._v("ï¼‰è¿›è¡Œåˆ†ç»„è®¡ç®—ï¼Œè¯·å®ŒæˆæŒ‰åˆ†ç±»è®¡ç®—çš„åŒæ—¶ï¼Œæ”¯æŒæŒ‰å¤©ã€å‘¨ã€æœˆã€å¹´è¿›è¡Œåˆ†æ‹£èŒƒå›´çš„ç»Ÿè®¡ã€‚")])])])}),[],!1,null,null,null);t.default=r.exports}}]);