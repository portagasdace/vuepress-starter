(window.webpackJsonp=window.webpackJsonp||[]).push([[340],{696:function(e,t,a){"use strict";a.r(t);var s=a(42),v=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"å¯¼è¯»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯¼è¯»"}},[e._v("#")]),e._v(" å¯¼è¯»")]),e._v(" "),a("p",[e._v("æœ¬èŠ‚æ ‡é¢˜ï¼šã€Œè£…ä¿®é˜¶æ®µã€- åŒæœåŠ¡æ¨¡å¼çƒ­æ›´æ–°")]),e._v(" "),a("p",[e._v("æœ¬èŠ‚ä¸»æ—¨ï¼šå¼€å‘ç¯å¢ƒä½“éªŒå†åº¦ä¼˜åŒ–å‡çº§ï¼Œå®ç°æ¨¡å—çƒ­æ›¿æ¢æœºåˆ¶")]),e._v(" "),a("p",[e._v("æœ¬èŠ‚é…å¥—ä»£ç ï¼š")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/Bigerfe/koa-react-ssr/tree/better/packages/my-react-ssr-HMR",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/Bigerfe/koa-react-ssr/tree/better/packages/my-react-ssr-HMR"),a("OutboundLink")],1)]),e._v(" "),a("h1",{attrs:{id:"æ­£æ–‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­£æ–‡"}},[e._v("#")]),e._v(" æ­£æ–‡")]),e._v(" "),a("p",[e._v("ä¸Šä¸€èŠ‚æˆ‘ä»¬å®Œæˆäº†ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œä»æœ¬èŠ‚å¼€å§‹ä¸€èµ·æ¥åšä¸€äº›â€œè£…ä¿®â€çš„å·¥ä½œï¼Œè®©åº”ç”¨éª¨æ¶çš„å¼€å‘ä½“éªŒæ›´å¥½,åŒæ—¶ä¹Ÿæ˜¯è§£å†³æˆ‘ä»¬ä¹‹å‰ç•™ä¸‹çš„å‘ã€‚")]),e._v(" "),a("p",[e._v("è‰¯å¥½çš„å¼€å‘ä½“éªŒå¯ä»¥å¤§å¤§æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œç›®å‰æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºé™·ï¼Œå¼€å‘ç¯å¢ƒä¸­éœ€è¦æ‰‹åŠ¨åˆ·æ–°é¡µé¢æ¥çœ‹æ•ˆæœã€‚")]),e._v(" "),a("p",[e._v("è€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ - æå®šä»–ï¼")]),e._v(" "),a("p",[e._v("ä½¿ç”¨"),a("code",[e._v("webpack --watch")]),e._v("æ¥åŠ¨æ€ç›‘å¬å‰ç«¯æ–‡ä»¶çš„æ”¹å˜å¹¶å®æ—¶æ‰“åŒ…ï¼Œè¾“å‡ºæ–°"),a("code",[e._v("bundle.js")]),e._v("æ–‡ä»¶ï¼Œè¿™æ ·æ–‡ä»¶å¤šäº†ä¹‹åæ‰“åŒ…é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œæ­¤å¤–è¿™æ ·çš„æ‰“åŒ…æ–¹å¼ä¸èƒ½åšåˆ°"),a("code",[e._v("hot replace")]),e._v("ï¼Œå³æ¯æ¬¡"),a("code",[e._v("webpack")]),e._v("ç¼–è¯‘ä¹‹åéœ€è¦æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥æœ¬èŠ‚æˆ‘ä»¬å°±æ˜¯ç”¨çƒ­æ›´æ–°æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚")]),e._v(" "),a("h1",{attrs:{id:"çƒ­æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#çƒ­æ›´æ–°"}},[e._v("#")]),e._v(" çƒ­æ›´æ–°")]),e._v(" "),a("p",[e._v("å¯¹äºçƒ­æ›´ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æœ‰æ‰€äº†è§£ï¼Œä¸€ç§æ˜¯çƒ­é‡è½½ï¼Œä¸€ç§æ˜¯æ¨¡å—çƒ­æ›¿æ¢ã€‚")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬è¿™é‡Œè¦å®ç°çš„æ˜¯æ¨¡å—çƒ­æ›¿æ¢ã€‚")]),e._v(" "),a("h1",{attrs:{id:"webpack-dev-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[e._v("#")]),e._v(" webpack-dev-server")]),e._v(" "),a("p",[e._v("å› ä¸ºè¯¥æ¨¡å—å·²ç»å†…ç½®äº†çƒ­æ›´æ–°æœºåˆ¶ï¼Œåªéœ€è¦è¿›è¡Œä¸€äº›ç®€å•çš„é…ç½®å°±èƒ½å°†è¿™ä¸ªç‰¹æ€§ç»§æ‰¿åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚")]),e._v(" "),a("p",[e._v("æ‰€ä»¥å¼€å‘ç¯å¢ƒä¸­å®ç°çƒ­æ›´æ–°æ¨èä½¿ç”¨"),a("code",[e._v("webpack-dev-server")]),e._v("ã€‚")]),e._v(" "),a("p",[e._v("ps:"),a("code",[e._v("webpack-dev-server")]),e._v("åé¢éƒ½ä½¿ç”¨"),a("code",[e._v("wds")]),e._v("ç®€ç§°æ¥ä»£æ›¿")]),e._v(" "),a("p",[e._v("è¯¥åº“çš„ä½œç”¨ä¸»è¦æ˜¯ç”¨æ¥æä¾›é™æ€èµ„æºæ–‡ä»¶çš„æ›´æ–°å’Œè®¿é—®ã€‚å…¶å†…éƒ¨ä¼šå¯åŠ¨ä¸€ä¸ªåŸºäº"),a("code",[e._v("express")]),e._v("çš„"),a("code",[e._v("http")]),e._v("æœåŠ¡å™¨ã€‚ è¯¥"),a("code",[e._v("http")]),e._v("æœåŠ¡å’Œæµè§ˆå™¨ä¹‹é—´ä½¿ç”¨"),a("code",[e._v("websocket")]),e._v("è¿›è¡Œå®æ—¶é€šè®¯ã€‚å½“åŸå§‹æ–‡ä»¶ä½œå‡ºæ”¹åŠ¨åï¼Œ"),a("code",[e._v("wds")]),e._v("ä¼šå®æ—¶ç¼–è¯‘ï¼Œä½†æ˜¯æœ€åçš„æ„å»ºæ–‡ä»¶å¹¶æ²¡æœ‰è¾“å‡ºåˆ°ç¡¬ç›˜ï¼Œè€Œæ˜¯å…¨éƒ¨è½½å…¥å†…å­˜ï¼Œçœå»äº†æ¯æ¬¡å¯¹ç£ç›˜çš„ "),a("code",[e._v("io")]),e._v("ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šä¹Ÿè¾ƒä»¥å¾€çš„æ–¹å¼æœ‰å¾ˆå¤§çš„æå‡ã€‚")]),e._v(" "),a("p",[e._v("å¯åŠ¨"),a("code",[e._v("webpack-dev-server")]),e._v("æœåŠ¡æœ‰2ç§æ–¹å¼ï¼š")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("é€šè¿‡ "),a("code",[e._v("cmd line")])])]),e._v(" "),a("li",[a("p",[e._v("é€šè¿‡"),a("code",[e._v("Node.js API")])])])]),e._v(" "),a("p",[e._v("ä¸ºäº†å¯ä»¥æ›´åŠ çµæ´»æ§åˆ¶ï¼Œæˆ‘ä»¬é‡‡ç”¨"),a("code",[e._v("API")]),e._v("æ–¹å¼æ¥å¯åŠ¨ã€‚")]),e._v(" "),a("p",[e._v("å¦å¤–è¿˜éœ€è¦ç»“åˆ"),a("code",[e._v("react-hot-loader")]),e._v("åº“æ¥å®ç° "),a("code",[e._v("react")]),e._v(" å¼€å‘ç¯å¢ƒä¸‹çš„çƒ­æ›´æ–°ã€‚")]),e._v(" "),a("h1",{attrs:{id:"å…·ä½“å®æ–½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…·ä½“å®æ–½"}},[e._v("#")]),e._v(" å…·ä½“å®æ–½")]),e._v(" "),a("h2",{attrs:{id:"ç«¯å£çº¦å®š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç«¯å£çº¦å®š"}},[e._v("#")]),e._v(" ç«¯å£çº¦å®š")]),e._v(" "),a("p",[e._v("æˆ‘ä»¬çº¦å®š"),a("code",[e._v("webpack-dev-server")]),e._v("æœåŠ¡ç«¯å£ä¸º"),a("code",[e._v("9002")]),e._v("ï¼Œåº”ç”¨éª¨æ¶çš„"),a("code",[e._v("node server")]),e._v("å¯åŠ¨ç«¯å£ä¸º"),a("code",[e._v("9001")]),e._v(",ä¿æŒä¸å˜ã€‚")]),e._v(" "),a("p",[e._v("ps:è¿™äº›ç«¯å£å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥è°ƒæ•´ã€‚")]),e._v(" "),a("h2",{attrs:{id:"å®‰è£…æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…æ¨¡å—"}},[e._v("#")]),e._v(" å®‰è£…æ¨¡å—")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm i webpack-dev-server -D\n\n")])])]),a("p",[a("code",[e._v("react-hot-loader")]),e._v(" å¯ä»¥ç»“åˆ "),a("code",[e._v("wds")]),e._v(" å®ç°çƒ­æ›´æ–°è¿‡ç¨‹ä¸­ä¿å­˜ "),a("code",[e._v("react")]),e._v(" ç»„ä»¶çš„çŠ¶æ€ä¸ä¸¢å¤±")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm i react-hot-loader -D\n\n")])])]),a("h2",{attrs:{id:"react-hot-loader-é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react-hot-loader-é…ç½®"}},[e._v("#")]),e._v(" react-hot-loader é…ç½®")]),e._v(" "),a("p",[a("code",[e._v(".babelrc")]),e._v(" å†…å¢åŠ  "),a("code",[e._v("react-hot-loader/babel")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// .babelrc\n{\n  "plugins": ["react-hot-loader/babel"]\n}\n\n')])])]),a("ul",[a("li",[e._v("æ ¹ç»„ä»¶ä½¿ç”¨çƒ­å¯¼å‡º")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// src/client/app/layout.js\n\nimport { hot } from 'react-hot-loader/root';\nclass Index extends React.Component{\n//...\n}\nexport default hot(Index);\n\n")])])]),a("ul",[a("li",[e._v("å®‰è£…"),a("code",[e._v("@hot-loader/react-dom")])])]),e._v(" "),a("p",[e._v("å®ƒæ›¿æ¢äº†åŒä¸€ç‰ˆæœ¬çš„"),a("code",[e._v("react-dom")]),e._v("åŒ…ï¼Œä½¿ç”¨äº†é¢å¤–çš„è¡¥ä¸æ¥æ”¯æŒçƒ­é‡æ–°åŠ è½½ã€‚")]),e._v(" "),a("p",[e._v("ç›´æ¥ä½¿ç”¨"),a("code",[e._v("react-dom")]),e._v("ï¼Œæ§åˆ¶å°ä¼šå‡ºç°ä¸‹é¢çš„è­¦å‘Š")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/12/18/16f17aa1a097f7fc?w=1272&h=172&f=png&s=52679",alt:""}})]),e._v(" "),a("ul",[a("li",[a("code",[e._v("webpack")]),e._v("é…ç½®å…¥å£"),a("code",[e._v("entry")]),e._v("è°ƒæ•´")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//webpack.dev.config\nmodule.exports = {\n  entry: {\n        main:['react-hot-loader/patch',resolvePath('../src/client/app/index.js'), //å…¥å£æ–‡ä»¶\n    }\n\n")])])]),a("h2",{attrs:{id:"wds-é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wds-é…ç½®"}},[e._v("#")]),e._v(" wds é…ç½®")]),e._v(" "),a("p",[e._v("é€šè¿‡ "),a("code",[e._v("api")]),e._v(" æ–¹å¼å¯åŠ¨ "),a("code",[e._v("wds")]),e._v(" æœåŠ¡æ—¶ï¼Œä¼šå¿½ç•¥"),a("code",[e._v("webpack.dev.config")]),e._v("å†…çš„é…ç½®ï¼Œéœ€è¦å°†é…ç½®ä½œä¸ºå‚æ•°ä¼ é€’ç»™"),a("code",[e._v("WebpackDevServer")]),e._v("ã€‚")]),e._v(" "),a("p",[e._v("åˆ›å»ºä¸€ä¸ª "),a("code",[e._v("wds")]),e._v(" é…ç½®æ–‡ä»¶")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// webpack/scripts/webpack-dev-server.config.js\n\nconst path  = require('path');\n\nmodule.exports = function (port,publicPath) {\n    return {\n        quiet: true,//ä¸æ˜¾ç¤ºæ„å»ºæ—¥å¿—\n        contentBase: path.resolve(__dirname, '../../dist/static'),\n        publicPath: publicPath,//å¿…é¡»å’Œ webpack.dev.config é…ç½®ä¸€è‡´\n        hot: true,\n        progress:true,\n        open: false,\n        compress: true,\n        watchOptions: {\n            ignored: /node_modules/,\n            //å½“ç¬¬ä¸€ä¸ªæ–‡ä»¶æ›´æ”¹ï¼Œä¼šåœ¨é‡æ–°æ„å»ºå‰å¢åŠ å»¶è¿Ÿã€‚\n            //è¿™ä¸ªé€‰é¡¹å…è®¸ webpack å°†è¿™æ®µæ—¶é—´å†…è¿›è¡Œçš„ä»»ä½•å…¶ä»–æ›´æ”¹éƒ½èšåˆåˆ°ä¸€æ¬¡é‡æ–°æ„å»ºé‡Œã€‚ä»¥æ¯«ç§’ä¸ºå•ä½ï¼š\n            aggregateTimeout: 500,\n            //æŒ‡å®šæ¯«ç§’ä¸ºå•ä½è¿›è¡Œè½®è¯¢\n            poll: 500\n        }\n    }\n}\n\n")])])]),a("h2",{attrs:{id:"ç›¸å…³-api-è°ƒç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³-api-è°ƒç”¨"}},[e._v("#")]),e._v(" ç›¸å…³ api è°ƒç”¨")]),e._v(" "),a("p",[e._v("åœ¨ "),a("code",[e._v("webpack/scripts")]),e._v("ä¸‹åˆ›å»º"),a("code",[e._v("wds-start.js")]),e._v("æ–‡ä»¶ï¼Œç”¨äºå¯åŠ¨ "),a("code",[e._v("wds")]),e._v(" æœåŠ¡ã€‚")]),e._v(" "),a("ol",[a("li",[e._v("è·å¾— "),a("code",[e._v("webpack compiler")])])]),e._v(" "),a("p",[a("code",[e._v("wds")]),e._v(" éœ€è¦å’Œ "),a("code",[e._v("webpack")]),e._v(" ç›¸ç»“åˆæ‰èƒ½å·¥ä½œ")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//webpack dev ç¯å¢ƒé…ç½®\nconst clientConfig = require('../webpack.dev.config');\n\n// è·å¾—webpack compiler\nfunction getWebPackCompiler() {\n    return webpack(clientConfig);\n}\n\n\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("åˆ›å»º "),a("code",[e._v("wds")]),e._v(" æœåŠ¡")])]),e._v(" "),a("p",[e._v("è¿™é‡Œçš„æœåŠ¡æŒ‡çš„æ˜¯ "),a("code",[e._v("wds")]),e._v(" å†…éƒ¨ä¼šå¯åŠ¨ä¸€ä¸ª "),a("code",[e._v("http server")]),e._v("ï¼Œç”¨æ¥æ”¯æŒ "),a("code",[e._v("socket")]),e._v(" å’Œ èµ„æºè®¿é—®ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("//wds é…ç½®\nconst getWdsConfig = require('./webpack-dev-server.config');\n\n//åˆ›å»º wds æœåŠ¡\nfunction createWdsServer() {\n\n    let compiler = getWebPackCompiler();\n\n     compiler.hooks.done.tap('done', function (data) {\n        console.log('\\n wds server compile done'); //ç¼–è¯‘å®Œæˆæ—¶çš„æç¤º \n    });\n    \n    return new WebpackDevServer(compiler, getWdsConfig(clientConfig.output.publicPath));\n}\n\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("å¯åŠ¨ "),a("code",[e._v("wds")]),e._v(" æœåŠ¡")])]),e._v(" "),a("p",[a("code",[e._v("createWdsServer")]),e._v("ä¼šè¿”å›ä¸€ä¸ª "),a("code",[e._v("http server")]),e._v(" å®ä¾‹,è¿™é‡Œå¯åŠ¨çš„ç«¯å£è®¾ç½®ä¸º"),a("code",[e._v("9002")]),e._v("ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// å¯åŠ¨ WebpackDevServer\n\nfunction runWdsServer() {\n\n    let devServer = createWdsServer();\n    let port=9002;//wds æœåŠ¡ç«¯å£\n    devServer.listen(port,'localhost',err => {\n        if (err) {\n            return console.log(err);\n        }\n        console.log(chalk.cyan('Starting the development node server...\\n'));\n    \n        console.log('ğŸš€ started');\n    });\n\n}\n\nrunWdsServer();\n\n\n")])])]),a("h2",{attrs:{id:"å…³é”®-é…ç½®-publicpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®-é…ç½®-publicpath"}},[e._v("#")]),e._v(" å…³é”® - é…ç½® publicPath")]),e._v(" "),a("p",[a("code",[e._v("wds")]),e._v(" å’Œ "),a("code",[e._v("webpack.dev.config")]),e._v(" çš„"),a("code",[e._v("publicPath")]),e._v("å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™çƒ­æ›´æ–°ä¼šæ— æ•ˆï¼Œä¼šé»˜è®¤è¯·æ±‚åˆ°"),a("code",[e._v("node server")]),e._v("ï¼Œå¯¼è‡´é™æ€èµ„æºè®¿é—®æ— æ•ˆã€‚")]),e._v(" "),a("p",[e._v("ä¸‹é¢å¯¹"),a("code",[e._v("webpack.dev.config.js")]),e._v("è¿›è¡Œè°ƒæ•´ï¼Œç«¯å£æŒ‡å‘çš„æ˜¯"),a("code",[e._v("wds")]),e._v("çš„ç«¯å£"),a("code",[e._v("9002")]),e._v("ï¼Œå› ä¸ºæ‰€æœ‰çš„é™æ€èµ„æºç°åœ¨æ˜¯ç”±"),a("code",[e._v("wds")]),e._v("æä¾›çš„ã€‚")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// webpack.dev.config.js\n\n output: {\n     //...\n    publicPath: 'http://localhost:9002/'\n}\n\n")])])]),a("h2",{attrs:{id:"é…ç½®-npm-scripts-å‘½ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®-npm-scripts-å‘½ä»¤"}},[e._v("#")]),e._v(" é…ç½® npm scripts å‘½ä»¤")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('"wds:watch": "BABEL_ENV=development node ./webpack/scripts/wds-start.js",\n\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("npm run wds:watch\n\n")])])]),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/12/17/16f1390440cbdf0a?w=813&h=153&f=png&s=39345",alt:""}})]),e._v(" "),a("p",[e._v("ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºç¼–è¯‘å·²ç»é€šè¿‡ï¼Œè€Œä¸”æ”¯æŒå®æ—¶ç¼–è¯‘ï¼Œä½†æ˜¯çƒ­æ›´æ–°è¿˜çœ‹ä¸å‡ºæ¥ã€‚")]),e._v(" "),a("h2",{attrs:{id:"è°ƒæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨å‘½ä»¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨å‘½ä»¤"}},[e._v("#")]),e._v(" è°ƒæ•´å¼€å‘ç¯å¢ƒå¯åŠ¨å‘½ä»¤")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// webpack/start.js\n\n//ç§»é™¤ webpack -watch ç›‘å¬\n- spawn('npm', ['run', 'fe:watch'], { stdio: 'inherit' });\n\n//å¢åŠ  wds ç›‘å¬\n+ spawn('npm', ['run', 'wds:watch'], { stdio: 'inherit' });\n\n\n")])])]),a("h2",{attrs:{id:"å®¢æˆ·ç«¯æ¸²æŸ“å…¥å£ä»£ç é…ç½®"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®¢æˆ·ç«¯æ¸²æŸ“å…¥å£ä»£ç é…ç½®"}},[e._v("#")]),e._v(" å®¢æˆ·ç«¯æ¸²æŸ“å…¥å£ä»£ç é…ç½®")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// src/client/app/index.js\n\n//åªæœ‰åœ¨å¼€å‘ç¯å¢ƒæ‰å¯ç”¨çƒ­æ›´æ–°\nif (process.env.NODE_ENV==='development' &&  module.hot) {\n    module.hot.accept();\n}\n\n")])])]),a("h2",{attrs:{id:"æ›´æ”¹-node-server-çš„-js-è„šæœ¬åœ°å€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ›´æ”¹-node-server-çš„-js-è„šæœ¬åœ°å€"}},[e._v("#")]),e._v(" æ›´æ”¹ "),a("code",[e._v("node server")]),e._v(" çš„ "),a("code",[e._v("js")]),e._v(" è„šæœ¬åœ°å€")]),e._v(" "),a("p",[e._v("å› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯åŒæœåŠ¡æ¨¡å¼")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("wds")]),e._v(" æœåŠ¡æä¾›é™æ€èµ„æºæœåŠ¡")]),e._v(" "),a("li",[a("code",[e._v("node server")]),e._v(" æä¾› ssr èƒ½åŠ›")])]),e._v(" "),a("p",[e._v("æ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†é™æ€èµ„æºçš„åœ°å€æŒ‡å‘ "),a("code",[e._v("wds")]),e._v(" æœåŠ¡çš„"),a("code",[e._v("9002")]),e._v("ç«¯å£")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("// src/server/common/assets.js\n\n- let devHost = '//localhost:9001';\n+ let devHost = '//localhost:9002';\n\n//...\n\n\n")])])]),a("h1",{attrs:{id:"æµ‹è¯•-å¯åŠ¨çƒ­æ›´æ–°"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•-å¯åŠ¨çƒ­æ›´æ–°"}},[e._v("#")]),e._v(" æµ‹è¯• - å¯åŠ¨çƒ­æ›´æ–°")]),e._v(" "),a("p",[e._v("æ‰§è¡Œ "),a("code",[e._v("npm run dev")])]),e._v(" "),a("p",[e._v("çœ‹ä¸‹å›¾ï¼Œ"),a("code",[e._v("socket")]),e._v("å·²æˆåŠŸå»ºç«‹é“¾æ¥,åé¢åªè¦æ›´æ–°äº†æ–‡ä»¶å°±ä¼šè‡ªåŠ¨æ›´æ–°é¡µé¢ï¼Œä¸”é¡µé¢ä¸ä¼šåˆ·æ–°,ç»„ä»¶çš„çŠ¶æ€ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/12/17/16f13a6dfe26dcda?w=1184&h=174&f=png&s=21443",alt:""}})]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/12/17/16f13a94a4715d96?w=1190&h=312&f=png&s=62696",alt:""}})]),e._v(" "),a("h1",{attrs:{id:"å°ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å°ç»“"}},[e._v("#")]),e._v(" å°ç»“")]),e._v(" "),a("p",[e._v("æœ¬åœ°å¼€å‘æœåŠ¡å¯åŠ¨åï¼Œä¼šå¯åŠ¨ä¸‰ä¸ªè¿›ç¨‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªæœåŠ¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœ€å¼€å§‹è¯´çš„åŒæœåŠ¡ï¼Œ"),a("code",[e._v("wds")]),e._v("æœåŠ¡å’Œ"),a("code",[e._v("node server")]),e._v(",åœ¨è¿™ä¸¤ä¸ªæœåŠ¡çš„é…åˆä¸‹å®Œæˆäº†å¼€å‘ç¯å¢ƒçš„çƒ­æ›´æ–°å¼€å‘ä½“éªŒã€‚")]),e._v(" "),a("ol",[a("li",[a("code",[e._v("wds")]),e._v("æœåŠ¡è¿›ç¨‹ï¼Œæä¾›é™æ€èµ„æºè®¿é—®å’Œçƒ­æ›´æ–°åŠŸèƒ½")]),e._v(" "),a("li",[e._v("æœåŠ¡ç«¯ä»£ç ç›‘å¬è¿›ç¨‹")]),e._v(" "),a("li",[a("code",[e._v("node http server")]),e._v(" æä¾›"),a("code",[e._v("react ssr")]),e._v("èƒ½åŠ›")])]),e._v(" "),a("p",[a("code",[e._v("node server")]),e._v(" ä¼šä»"),a("code",[e._v("wds 9002")]),e._v("ç«¯å£æœåŠ¡ä¸ŠåŠ è½½é™æ€èµ„æºã€‚")]),e._v(" "),a("p",[e._v("å¥½äº†ï¼Œæœ¬å°èŠ‚åˆ°æ­¤ç»“æŸï¼Œå¿«æ¥è¯•è¯•çƒ­æ›´æ–°å§ã€‚")]),e._v(" "),a("p",[e._v("æœ¬èŠ‚ä»£ç å·²ä¸Šä¼ ")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/Bigerfe/koa-react-ssr/tree/better/packages/my-react-ssr-HMR",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/Bigerfe/koa-react-ssr/tree/better/packages/my-react-ssr-HMR"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("æ„Ÿè°¢ä½ çš„é˜…è¯»ã€‚")]),e._v(" "),a("p",[e._v("å¦‚æœæœ‰é—®é¢˜æ¬¢è¿ç•™è¨€ï¼Œä¹Ÿæ¬¢è¿åœ¨ç•™è¨€åŒºç•™ä¸‹ä½ çš„æƒ³æ³•å’Œæ€è€ƒã€‚")])])}),[],!1,null,null,null);t.default=v.exports}}]);